<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <script src="https://sis-t.redsys.es:25443/sis/NC/sandbox/redsysV3.js"></script>
</head>
<body>
  <div id="card-form" style="min-height: 360px"></div>
  <input type="hidden" id="token" />
  <input type="hidden" id="errorCode" />
  <script>
    function merchantValidationEjemplo() { return true; }

    // Listener: Redsys escribe el idOper en "token"
    window.addEventListener("message", function receiveMessage(event) {
      storeIdOper(event, "token", "errorCode", "merchantValidationEjemplo");
      if (document.getElementById("token").value) {
        console.log("operationId:", document.getElementById("token").value);
      }
    });

    // Datos de prueba (sustituye por los tuyos)
    var merchantCode = '999008881'; // FUC
    var terminal = '1';
    var order = 'TEST12345'; // Ãºnico por intento

    getInSiteForm('card-form', '', '', '', '', 'Pagar con Redsys',
      merchantCode, terminal, order);
  </script>
</body>
</html>